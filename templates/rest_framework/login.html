{% extends "rest_framework/base.html" %}
{% load i18n %}

{% block title %}{% if name %}{{ name }} â€“ {% endif %}API{% endblock %}

{% block branding %}
<a class='navbar-brand' rel="nofollow" href='{% url "api-root" %}'>
    Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù†Ø¨Ø§Ø± - API
</a>
{% endblock %}

{% block userlinks %}
    {% if user.is_authenticated %}
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                {{ user.get_username }}
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li><a href="{% url 'admin:logout' %}">{% trans "Log out" %}</a></li>
            </ul>
        </li>
    {% else %}
        <li><a href="{% url 'admin:login' %}">{% trans "Log in" %}</a></li>
    {% endif %}
{% endblock %}

{% block content %}
    {% if not user.is_authenticated %}
        <div class="alert alert-warning" style="margin: 20px;">
            <h4>ğŸ” Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª</h4>
            <p>Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ APIØŒ Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.</p>
            <p>
                <a href="{% url 'admin:login' %}" class="btn btn-primary">
                    <i class="fa fa-sign-in"></i> ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
                </a>
                <a href="/" class="btn btn-success">
                    <i class="fa fa-home"></i> ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ† API
                </a>
            </p>
            <hr>
            <h5>Ø±Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ:</h5>
            <ul>
                <li><strong>Session Authentication:</strong> Ø§Ø² Ø¯Ú©Ù…Ù‡ "ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…" Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                <li><strong>JWT Token:</strong> Ø§Ø² ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ† API Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                <li><strong>Basic Authentication:</strong> Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ Ø¯Ø± header Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯</li>
            </ul>
        </div>
    {% endif %}
    
    {{ block.super }}
{% endblock %}

{% block script %}
    {{ block.super }}
    <script>
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ JWT Token Ø¯Ø± toolbar
        document.addEventListener('DOMContentLoaded', function() {
            const toolbar = document.querySelector('.toolbar');
            if (toolbar && !document.querySelector('#jwt-token-btn')) {
                const jwtBtn = document.createElement('button');
                jwtBtn.id = 'jwt-token-btn';
                jwtBtn.className = 'btn btn-info btn-sm';
                jwtBtn.innerHTML = '<i class="fa fa-key"></i> JWT Token';
                jwtBtn.style.marginLeft = '10px';
                jwtBtn.onclick = function() {
                    const token = prompt('ØªÙˆÚ©Ù† JWT Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:');
                    if (token) {
                        localStorage.setItem('jwt_token', token);
                        location.reload();
                    }
                };
                toolbar.appendChild(jwtBtn);
            }
        });
    </script>
{% endblock %}


